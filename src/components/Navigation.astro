---
import { Icon } from "astro-icon/components";
---

<button
  type="button"
  id="nav-button"
  title="Navigation öffnen"
  aria-controls="navigation"
  class="inline-flex items-center justify-center focus:outline-none md:hidden"
  aria-expanded="false"
>
  <span class="sr-only">Navigation öffnen</span>
  <Icon name="heroicons:bars-3-bottom-right" size={28} />
</button>

<nav
  aria-label="Navigation"
  class="block select-none overflow-y-clip transition-all duration-300 max-md:w-full max-md:max-h-0"
  id="navigation"
>
  <ul
    class="grid grid-cols-3 items-center gap-1 max-md:justify-evenly max-md:text-center md:flex md:gap-6 md:text-sm"
  >
    <li
      class="block grow rounded rounded-l-lg text-blue-800/80 transition hover:text-blue-950 max-md:bg-blue-100 max-md:py-1 max-md:hover:bg-blue-200 md:text-neutral-600 md:hover:text-neutral-600/75 dark:md:text-neutral-300 dark:md:hover:text-neutral-300/75 dark:text-blue-200 dark:hover-text-blue-300 max-md:dark:bg-blue-800 max-md:dark:hover:bg-blue-900"
    >
      <a class="block items-center md:inline-flex" href="/" title="Blog">
        <span class="inline-block pt-1 md:hidden">
          <Icon name="heroicons:document-text" size={20} />
        </span>

        <span class="block">Blog</span>
      </a>
    </li>

    <li
      class="block grow rounded text-blue-800/80 transition hover:text-blue-950 max-md:bg-blue-100 max-md:py-1 max-md:hover:bg-blue-200 md:text-neutral-600 md:hover:text-neutral-600/75 dark:md:text-neutral-300 dark:md:hover:text-neutral-300/75 dark:text-blue-200 dark:hover-text-blue-300 max-md:dark:bg-blue-800 max-md:dark:hover:bg-blue-900"
    >
      <a
        class="block items-center gap-2 md:inline-flex"
        href="https://pawcode.de?mtm_campaign=Blog&mtm_source=pawcode"
        title="Website"
      >
        <span class="inline-block pt-1 md:hidden">
          <Icon name="heroicons:home" size={20} />
        </span>

        <span class="block">Website</span>

        <span class="hidden md:block">
          <Icon name="heroicons:arrow-top-right-on-square" size={16} />
        </span>
      </a>
    </li>

    <li
      class="block grow rounded rounded-r-lg text-blue-800/80 transition hover:text-blue-950 max-md:bg-blue-100 max-md:py-1 max-md:hover:bg-blue-200 md:text-neutral-600 md:hover:text-neutral-600/75 dark:md:text-neutral-300 dark:md:hover:text-neutral-300/75 dark:text-blue-200 dark:hover-text-blue-300 max-md:dark:bg-blue-800 max-md:dark:hover:bg-blue-900"
    >
      <a
        href="https://github.com/pawcoding"
        rel="noreferrer"
        target="_blank"
        title="GitHub"
        class="block items-center gap-2 md:inline-flex"
      >
        <span class="inline-block pt-1 md:hidden">
          <Icon name="simple-icons:github" size={20} />
        </span>

        <span class="block">GitHub</span>

        <span class="hidden md:block">
          <Icon name="heroicons:arrow-top-right-on-square" size={16} />
        </span>
      </a>
    </li>
  </ul>
</nav>

<script>
  document.addEventListener("astro:page-load", () => {
    function openNav() {
      const navButton = document.getElementById("nav-button");
      navButton?.setAttribute("aria-expanded", "true");
      navButton?.setAttribute("title", "Navigation schließen");

      const navButtonText = navButton?.querySelector("span");
      if (navButtonText) {
        navButtonText.innerHTML = "Navigation schließen";
      }

      const navigation = document.getElementById("navigation");
      navigation?.classList.add("max-md:max-h-24", "max-md:pt-4");
      navigation?.classList.remove("max-md:max-h-0");
    }

    function closeNav() {
      const navButton = document.getElementById("nav-button");
      navButton?.setAttribute("aria-expanded", "false");
      navButton?.setAttribute("title", "Navigation öffnen");

      const navButtonText = navButton?.querySelector("span");
      if (navButtonText) {
        navButtonText.innerHTML = "Navigation öffnen";
      }

      const navigation = document.getElementById("navigation");
      navigation?.classList.add("max-md:max-h-0");
      navigation?.classList.remove("max-md:max-h-24", "max-md:pt-4");
    }

    document
      .getElementById("nav-button")
      ?.addEventListener("click", function () {
        if (this.getAttribute("aria-expanded") === "true") {
          closeNav();
        } else {
          openNav();
        }
      });

    document.querySelectorAll("nav li").forEach((li) => {
      li.addEventListener("click", () => {
        closeNav();
      });
    });
  });
</script>
